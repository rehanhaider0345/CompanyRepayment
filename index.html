<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Company's Repayment System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Arial,sans-serif}
body{min-height:100vh;background:linear-gradient(180deg,#e0f2fe,#f1f5f9);display:flex;justify-content:center;padding:20px 0}
.container{width:100%;max-width:480px;background:linear-gradient(180deg,#ffffff,#f8fafc);border-radius:20px;padding:22px;box-shadow:0 15px 35px rgba(0,0,0,0.1);border:1px solid #e5e7eb;margin-bottom:20px}
.header{text-align:center;margin-bottom:18px}
.header h1{font-size:24px;color:#0f172a;margin-bottom:4px}
.header p{font-size:13px;color:#64748b}
.section{border-radius:16px;padding:16px;margin-top:18px;background:#ffffff;border:1px solid #e5e7eb;box-shadow:0 5px 15px rgba(0,0,0,0.03)}
.section-title{font-weight:700;margin-bottom:12px;color:#2563eb}
.row{display:grid;grid-template-columns:1fr auto auto;gap:8px;align-items:center;margin:12px 0}
.label{font-weight:600;color:#475569}
.value{color:#0f766e;font-weight:700;word-break:break-word;text-align:right}
.copy{background:linear-gradient(135deg,#0f766e,#0d9488);color:#fff;padding:6px 12px;border-radius:12px;font-size:12px;cursor:pointer}
.warning{font-size:13px;color:#475569}
input{width:100%;padding:14px;margin-top:12px;border-radius:16px;border:1px solid #cbd5f5;background:#f8fafc;outline:none}
input:focus{border-color:#2563eb}
button{width:100%;margin-top:18px;padding:15px;background:linear-gradient(135deg,#2563eb,#1d4ed8);color:#fff;border:none;border-radius:18px;font-size:16px;font-weight:800;cursor:pointer}
button:disabled{background:#94a3b8;cursor:not-allowed}
.admin-btn{margin-top:14px;background:linear-gradient(135deg,#f59e0b,#d97706)}
.footer{text-align:center;margin-top:18px;font-size:12px;color:#64748b}
.admin-panel{display:none}
.admin-box{margin-top:16px;background:#f1f5f9;padding:16px;border-radius:16px;border:1px solid #e5e7eb}
.admin-box input{margin-top:8px}
.admin-list{font-size:13px;color:#0f172a;margin-top:10px;max-height:200px;overflow-y:auto}
.admin-list div{padding:6px 0;border-bottom:1px dashed #e5e7eb}
.back-btn{margin-top:12px;background:linear-gradient(135deg,#6b7280,#374151)}
@media(max-width:480px){.row{grid-template-columns:1fr;gap:6px}.value{text-align:left}.copy{width:100%;text-align:center}}
</style>
</head>
<body>

<!-- MAIN PAGE -->
<div class="container" id="mainPage">
    <div class="header">
        <h1>Company's Repayment System</h1>
        <p>Secure • Verified • Encrypted Payment Flow</p>
    </div>

    <div class="section">
        <div class="section-title">Step 1 : Payment Details</div>
        <div class="row">
            <div class="label">Amount</div>
            <div class="value" id="amount"></div>
            <div class="copy" onclick="copyText('amount')">Copy</div>
        </div>
        <div class="row">
            <div class="label">Recipient</div>
            <div class="value" id="name"></div>
            <div class="copy" onclick="copyText('name')">Copy</div>
        </div>
        <div class="row">
            <div class="label">UPI ID</div>
            <div class="value" id="upi"></div>
            <div class="copy" onclick="copyText('upi')">Copy</div>
        </div>
    </div>

    <div class="section">
        <div class="section-title">Step 2 : Transfer Exact Amount</div>
        <div class="warning">⚠ Do not modify amount during transfer.</div>
    </div>

    <div class="section">
        <div class="section-title">Step 3 : Submit UTR / Reference No</div>
        <input id="utr" placeholder="Enter UTR / Ref No" oninput="toggleSubmit()">
    </div>

    <button id="submitBtn" onclick="submitPayment()" disabled>Confirm Payment</button>
    <button class="admin-btn" onclick="openAdmin()">Admin</button>

    <div class="footer">Trusted by thousands of users</div>
</div>

<!-- SUCCESS PAGE -->
<div class="container" id="successPage" style="display:none;text-align:center">
    <h1>Payment Successful</h1>
    <p>Your transaction has been recorded</p>
    <div style="font-size:64px;margin:15px 0;">✅</div>
    <button onclick="backHome()" class="back-btn">Back to Main Menu</button>
</div>

<!-- ADMIN PANEL -->
<div class="container admin-panel" id="adminPanel">

    <!-- LOGIN BOX -->
    <div id="adminLoginBox">
        <div class="section-title">Admin Login</div>
        <input id="adminUser" placeholder="Username">
        <input id="adminPass" type="password" placeholder="Password">
        <button onclick="adminLogin()">Login</button>
        <button class="back-btn" onclick="backToMainFromAdmin()">Back to Main Menu</button>
    </div>

    <!-- DASHBOARD -->
    <div id="adminDashboard" style="display:none">
        <div class="admin-box">
            <div class="section-title">Edit Payment Info</div>
            <input id="aAmount" placeholder="Amount (1–70000)">
            <input id="aName" placeholder="Recipient Name">
            <input id="aUpi" placeholder="UPI ID">
            <button onclick="saveAdmin()">Save Changes</button>
        </div>

        <div class="admin-box">
            <div class="section-title">Last 20 Submitted UTRs</div>
            <div class="admin-list" id="utrList"></div>
        </div>

        <button onclick="logout()" class="back-btn">Logout</button>
    </div>

</div>

<script>
const ADMIN_USER="Sami@12";
const ADMIN_PASS="Saghir@786";
let utrs=JSON.parse(localStorage.getItem("utrs")||"[]");

// Default fallback values
const defaultData = {amount:"₹ 8300", name:"Rupeeleap", upi:"paytm.s1xc6xh@pty"};

// Load payment info from localStorage or defaults
function loadPaymentInfo(){
    let amt = localStorage.getItem("amount") || defaultData.amount;
    let nm  = localStorage.getItem("name") || defaultData.name;
    let up  = localStorage.getItem("upi") || defaultData.upi;

    document.getElementById("amount").innerText = amt;
    document.getElementById("name").innerText   = nm;
    document.getElementById("upi").innerText    = up;
}
loadPaymentInfo();

function toggleSubmit(){document.getElementById("submitBtn").disabled = document.getElementById("utr").value.trim() === "";}

function submitPayment(){
    let amt = parseInt(document.getElementById("amount").innerText.replace(/\D/g,''));
    if(amt<1||amt>70000){alert("Amount must be 1–70000");return;}

    let timestamp=new Date().toLocaleString();
    utrs.unshift(timestamp + " : " + document.getElementById("utr").value.trim());
    utrs=utrs.slice(0,20);
    localStorage.setItem("utrs",JSON.stringify(utrs));

    document.getElementById("mainPage").style.display="none";
    document.getElementById("successPage").style.display="block";
}

function backHome(){
    document.getElementById("successPage").style.display="none";
    document.getElementById("mainPage").style.display="block";
    document.getElementById("utr").value="";
    document.getElementById("submitBtn").disabled=true;
}

function openAdmin(){
    document.getElementById("mainPage").style.display="none";
    document.getElementById("adminPanel").style.display="block";
}

function backToMainFromAdmin(){
    document.getElementById("adminPanel").style.display="none";
    document.getElementById("mainPage").style.display="block";
}

function adminLogin(){
    if(document.getElementById("adminUser").value===ADMIN_USER && document.getElementById("adminPass").value===ADMIN_PASS){
        document.getElementById("adminLoginBox").style.display="none";
        document.getElementById("adminDashboard").style.display="block";

        document.getElementById("aAmount").value = parseInt(document.getElementById("amount").innerText.replace(/\D/g,''));
        document.getElementById("aName").value = document.getElementById("name").innerText;
        document.getElementById("aUpi").value = document.getElementById("upi").innerText;

        renderUTRs();
        document.getElementById("adminUser").value="";
        document.getElementById("adminPass").value="";
    } else alert("Access Denied");
}

function saveAdmin(){
    let amt = parseInt(document.getElementById("aAmount").value);
    let nm  = document.getElementById("aName").value.trim();
    let up  = document.getElementById("aUpi").value.trim();

    if(amt<1||amt>70000){alert("Invalid amount");return;}
    if(nm===""){alert("Name cannot be empty");return;}
    if(up===""){alert("UPI cannot be empty");return;}

    document.getElementById("amount").innerText = "₹ " + amt;
    document.getElementById("name").innerText = nm;
    document.getElementById("upi").innerText = up;

    localStorage.setItem("amount","₹ "+amt);
    localStorage.setItem("name",nm);
    localStorage.setItem("upi",up);

    alert("Payment info updated successfully!");
}

function renderUTRs(){
    document.getElementById("utrList").innerHTML = utrs.length ? utrs.map((u,i)=>`<div>${i+1}. ${u}</div>`).join("") : "No submissions yet";
}

function logout(){
    document.getElementById("adminDashboard").style.display="none";
    document.getElementById("adminLoginBox").style.display="block";
    document.getElementById("adminPanel").style.display="none";
    document.getElementById("mainPage").style.display="block";
}

function copyText(id){navigator.clipboard.writeText(document.getElementById(id).innerText);}
</script>

</body>
</html>
